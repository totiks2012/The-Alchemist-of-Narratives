<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã–π –ê–ª—Ö–∏–º–∏–∫</title>
    <style>
        :root {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #3d3d3d;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --accent-primary: #9b59b6;
            --accent-primary-hover: #8e44ad;
            --accent-secondary: #3498db;
            --accent-secondary-hover: #2980b9;
            --accent-success: #27ae60;
            --accent-success-hover: #219a52;
            --accent-warning: #e67e22;
            --accent-warning-hover: #d35400;
            --accent-danger: #e74c3c;
            --accent-danger-hover: #c0392b;
            --accent-info: #1abc9c;
            --accent-info-hover: #16a085;
            --accent-dimensional: #e74c3c;
            --accent-dimensional-hover: #c0392b;
            --border-color: #404040;
            --shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --text-primary: #2c3e50;
            --text-secondary: #495057;
            --accent-primary: #9b59b6;
            --accent-primary-hover: #8e44ad;
            --accent-secondary: #3498db;
            --accent-secondary-hover: #2980b9;
            --accent-success: #27ae60;
            --accent-success-hover: #219a52;
            --accent-warning: #e67e22;
            --accent-warning-hover: #d35400;
            --accent-danger: #e74c3c;
            --accent-danger-hover: #c0392b;
            --accent-info: #1abc9c;
            --accent-info-hover: #16a085;
            --accent-dimensional: #e74c3c;
            --accent-dimensional-hover: #c0392b;
            --border-color: #bdc3c7;
            --shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            transition: background 0.3s ease;
        }

        [data-theme="light"] body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-primary);
            border-radius: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .toolbar {
            background: var(--bg-secondary);
            padding: 15px 20px;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
            border-bottom: 1px solid var(--border-color);
        }

        .theme-toggle {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
        }

        .theme-toggle input {
            display: none;
        }

        .toggle-slider {
            width: 50px;
            height: 24px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-slider::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--accent-primary);
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.3s ease;
        }

        .theme-toggle input:checked + .toggle-slider::before {
            transform: translateX(26px);
        }

        .toolbar-btn {
            background: var(--accent-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toolbar-btn:hover {
            background: var(--accent-secondary-hover);
            transform: translateY(-2px);
        }

        .toolbar-btn:active {
            transform: translateY(0);
        }

        .toolbar-btn.genre {
            background: var(--accent-primary);
        }

        .toolbar-btn.genre:hover {
            background: var(--accent-primary-hover);
        }

        .toolbar-btn.query {
            background: var(--accent-success);
        }

        .toolbar-btn.query:hover {
            background: var(--accent-success-hover);
        }

        .toolbar-btn.actions {
            background: var(--accent-info);
        }

        .toolbar-btn.actions:hover {
            background: var(--accent-info-hover);
        }

        .toolbar-btn.references {
            background: var(--accent-warning);
        }

        .toolbar-btn.references:hover {
            background: var(--accent-warning-hover);
        }

        .toolbar-btn.dimensional {
            background: var(--accent-dimensional);
        }

        .toolbar-btn.dimensional:hover {
            background: var(--accent-dimensional-hover);
        }

        .toolbar-btn.import {
            background: var(--accent-success);
        }

        .toolbar-btn.import:hover {
            background: var(--accent-success-hover);
        }

        .toolbar-btn.export {
            background: var(--accent-warning);
        }

        .toolbar-btn.export:hover {
            background: var(--accent-warning-hover);
        }

        .toolbar-btn.collect {
            background: var(--accent-primary);
        }

        .toolbar-btn.collect:hover {
            background: var(--accent-primary-hover);
        }

        .toolbar-btn.clear {
            background: var(--accent-danger);
        }

        .toolbar-btn.clear:hover {
            background: var(--accent-danger-hover);
        }

        .input-section {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .input-section.active {
            padding: 20px;
            max-height: 300px;
        }

        .genre-section, .query-section, .actions-section, .references-section, .dimensional-section {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            background: var(--bg-tertiary);
        }

        .genre-section.active, .query-section.active, .actions-section.active, .references-section.active, .dimensional-section.active {
            padding: 20px;
            max-height: 500px;
        }

        .preset-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
            color: var(--text-primary);
            max-height: 350px;
            overflow-y: auto;
            white-space: pre-wrap;
            resize: vertical;
            min-height: 200px;
            width: 100%;
        }

        .preset-content:focus {
            outline: none;
            border-color: var(--accent-secondary);
        }

        .preset-comment {
            color: #666;
            font-style: italic;
        }

        .input-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .input-action-btn {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .input-action-btn:hover {
            background: var(--border-color);
        }

        .input-action-btn.clear-input {
            background: var(--accent-danger);
            color: white;
        }

        .input-action-btn.clear-input:hover {
            background: var(--accent-danger-hover);
        }

        .theme-input {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            font-family: inherit;
            background: var(--bg-secondary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .theme-input:focus {
            outline: none;
            border-color: var(--accent-secondary);
        }

        .theme-input::placeholder {
            color: var(--text-secondary);
        }

        .output-section {
            padding: 20px;
            border-top: 1px solid var(--border-color);
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .output-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .output-actions {
            display: flex;
            gap: 10px;
        }

        .output-action-btn {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .output-action-btn:hover {
            background: var(--border-color);
        }

        .output-action-btn.clear-output {
            background: var(--accent-danger);
            color: white;
        }

        .output-action-btn.clear-output:hover {
            background: var(--accent-danger-hover);
        }

        .output-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            min-height: 200px;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .status-message {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--accent-success);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .status-message.show {
            transform: translateX(0);
        }

        .status-message.error {
            background: var(--accent-danger);
        }

        .interview-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .interview-toggle label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
            color: var(--text-primary);
        }

        .interview-toggle input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .interview-mode {
            background: var(--accent-info);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–º–ø–æ—Ä—Ç–∞ */
        .import-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .import-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .import-modal-content {
            background: var(--bg-primary);
            border-radius: 10px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow);
        }

        .import-modal-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-primary);
            text-align: center;
        }

        .import-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .import-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: 6px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .import-option:hover {
            background: var(--bg-tertiary);
        }

        .import-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .import-option label {
            flex: 1;
            cursor: pointer;
            color: var(--text-primary);
        }

        .import-modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .import-modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .import-modal-btn.confirm {
            background: var(--accent-success);
            color: white;
        }

        .import-modal-btn.confirm:hover {
            background: var(--accent-success-hover);
        }

        .import-modal-btn.cancel {
            background: var(--accent-danger);
            color: white;
        }

        .import-modal-btn.cancel:hover {
            background: var(--accent-danger-hover);
        }

        @media (max-width: 768px) {
            .toolbar {
                flex-direction: column;
                align-items: stretch;
            }

            .toolbar-btn {
                justify-content: center;
            }

            .theme-toggle {
                margin-left: 0;
                justify-content: center;
            }

            .input-actions,
            .output-actions {
                flex-direction: column;
            }

            body {
                padding: 10px;
            }

            .import-modal-content {
                width: 95%;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="toolbar">
            <button class="toolbar-btn" id="setThemeBtn">
                <span>üìù</span>
                –ó–∞–¥–∞—Ç—å —Ç–µ–º—É
            </button>
            <button class="toolbar-btn genre" id="genreBtn">
                <span>üé≠</span>
                –ñ–∞–Ω—Ä–æ–≤—ã–π –≥–∏–±—Ä–∏–¥
            </button>
            <button class="toolbar-btn query" id="queryBtn">
                <span>‚ö°</span>
                –ö–ª—é—á–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å
            </button>
            <button class="toolbar-btn actions" id="actionsBtn">
                <span>üö´</span>
                –î–µ–π—Å—Ç–≤–∏—è-–ò—Å–∫–ª—é—á–µ–Ω–∏—è
            </button>
            <button class="toolbar-btn references" id="referencesBtn">
                <span>üìö</span>
                –†–µ—Ñ–µ—Ä–µ–Ω—Å—ã
            </button>
            <button class="toolbar-btn dimensional" id="dimensionalBtn">
                <span>üßä</span>
                [3D-–ö–ê–†–ö–ê–°: ON]
            </button>
            <button class="toolbar-btn collect" id="collectBtn">
                <span>üîÆ</span>
                –°–æ–±—Ä–∞—Ç—å
            </button>
            <button class="toolbar-btn export" id="exportBtn">
                <span>üì§</span>
                –≠–∫—Å–ø–æ—Ä—Ç
            </button>
            <button class="toolbar-btn import" id="importBtn">
                <span>üì•</span>
                –ò–º–ø–æ—Ä—Ç
            </button>
            <button class="toolbar-btn clear" id="clearAllBtn">
                <span>üóëÔ∏è</span>
                –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
            </button>

            <label class="theme-toggle" id="themeToggle">
                <input type="checkbox" id="themeCheckbox">
                <span class="toggle-slider"></span>
                <span>–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</span>
            </label>
        </div>

        <div class="input-section" id="inputSection">
            <textarea
                class="theme-input"
                id="themeInput"
                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–º—ã—Å–ª–æ–≤—É—é —Ç–µ–º—É –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–Ω—É—é —Ç–æ—á–∫—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞..."
            ></textarea>
            <div class="input-actions">
                <button class="input-action-btn clear-input" id="clearInputBtn">
                    <span>‚ùå</span>
                    –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ
                </button>
            </div>
        </div>

        <div class="genre-section" id="genreSection">
            <textarea
                class="preset-content"
                id="genreContent"
                placeholder="–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (—É–±–µ—Ä–∏—Ç–µ #) –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ –∂–∞–Ω—Ä–æ–≤—ã–µ –≥–∏–±—Ä–∏–¥—ã..."
            ># ===== –ü–†–ï–°–ï–¢–´ –ñ–ê–ù–†–û–í–´–• –ì–ò–ë–†–ò–î–û–í =====
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (—É–±–µ—Ä–∏—Ç–µ #) —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ—Å–µ—Ç
# –ò–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∂–∞–Ω—Ä–æ–≤—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏!
# –ü—Ä–∏ —Å–±–æ—Ä–∫–µ –¥–≤–∏–∂–æ–∫ —Å–æ–∑–¥–∞—Å—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å–º–µ—Å—å –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∂–∞–Ω—Ä–æ–≤

# === –ö–ò–ë–ï–†–ü–ê–ù–ö-–ù–ê–ü–†–ê–í–õ–ï–ù–ò–Ø ===
# "–ù—É–∞—Ä–Ω—ã–π –∫–∏–±–µ—Ä–ø–∞–Ω–∫" + "–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–∞—Ç–∏—Ä–∞" + "–î–µ—Ç–µ–∫—Ç–∏–≤–Ω–∞—è –∑–∞–≥–∞–¥–∫–∞"
# "–¢–µ—Ö–Ω–æ—Ç—Ä–∏–ª–ª–µ—Ä" + "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ö–æ—Ä—Ä–æ—Ä" + "–ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–≥–æ–≤–æ—Ä"
# "–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∫–∏–±–µ—Ä–ø–∞–Ω–∫" + "–¢—Ä–∞–≥–µ–¥–∏—è" + "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–∏—Ç—á–∞"
# "–ë–∏–æ–ø–∞–Ω–∫" + "–≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–ª–ª–µ—Ä" + "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —ç—Ç–∏–∫–∞"

# === –§–≠–ù–¢–ï–ó–ò-–ù–ê–ü–†–ê–í–õ–ï–ù–ò–Ø ===
# "–¢–µ–º–Ω–æ–µ —Ñ—ç–Ω—Ç–µ–∑–∏" + "–ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç—Ä–∏–≥–∞" + "–ú–æ—Ä–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä"
# "–≠–ø–∏—á–µ—Å–∫–æ–µ —Ñ—ç–Ω—Ç–µ–∑–∏" + "–≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –∫—Ä–∏–∑–∏—Å" + "–≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–∞–≥–∞"
# "–£—Ä–±–∞–Ω-—Ñ—ç–Ω—Ç–µ–∑–∏" + "–ö—Ä–∏–º–∏–Ω–∞–ª—å–Ω–∞—è –¥—Ä–∞–º–∞" + "–°–µ–º–µ–π–Ω–∞—è —Å–∞–≥–∞"
# "–ú–∞–≥–∏—á–µ—Å–∫–∏–π —Ä–µ–∞–ª–∏–∑–º" + "–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –¥—Ä–∞–º–∞" + "–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –¥–µ—Ç–µ–∫—Ç–∏–≤"

# === –ù–ê–£–ß–ù–ê–Ø –§–ê–ù–¢–ê–°–¢–ò–ö–ê ===
# "–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –æ–ø–µ—Ä–∞" + "–ê–Ω—Ç—Ä–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ" + "–ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–∏"
# "–¢–≤–µ—Ä–¥–∞—è –Ω–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞" + "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –¥—Ä–∞–º–∞" + "–≠—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–ª–µ–º–º–∞"
# "–ü–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å" + "–≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–ª–ª–µ—Ä" + "–í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞"
# "–¢—Ä–∞–Ω—Å–≥—É–º–∞–Ω–∏–∑–º" + "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–∏—Ç—á–∞" + "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —É—Ç–æ–ø–∏—è/–¥–∏—Å—Ç–æ–ø–∏—è"

# === –°–û–í–†–ï–ú–ï–ù–ù–´–ï –ñ–ê–ù–†–´ ===
# "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–ª–ª–µ—Ä" + "–ú–∞–≥–∏—á–µ—Å–∫–∏–π —Ä–µ–∞–ª–∏–∑–º" + "–°–µ–º–µ–π–Ω–∞—è –¥—Ä–∞–º–∞"
# "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –¥—Ä–∞–º–∞" + "–ú–∏—Å—Ç–∏–∫–∞" + "–õ—é–±–æ–≤–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è"
# "–ü—Ä–∏–∫–ª—é—á–µ–Ω—á–µ—Å–∫–∏–π –±–æ–µ–≤–∏–∫" + "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–∏—Ç—á–∞" + "–≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —É–∂–∞—Å"
# "–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–∞—Ç–∏—Ä–∞" + "–ß–µ—Ä–Ω–∞—è –∫–æ–º–µ–¥–∏—è" + "–ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –∞–ª–ª–µ–≥–æ—Ä–∏—è"

# === –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢–ê–õ–¨–ù–´–ï –°–ú–ï–°–ò ===
# "–í–µ—Å—Ç–µ—Ä–Ω" + "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —Ö–æ—Ä—Ä–æ—Ä" + "–ü–æ—ç—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—á–∏—Ç–∞—Ç–∏–≤"
# "–†–µ—Ç—Ä–æ-—Ñ—É—Ç—É—Ä–∏–∑–º" + "–ù—É–∞—Ä" + "–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –¥—Ä–∞–º–∞"
# "–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∞–ª–∏–∑–º" + "–¢–µ—Ö–Ω–æ-—Ñ—ç–Ω—Ç–µ–∑–∏" + "–ü—Å–∏—Ö–æ–≥–µ–æ–≥—Ä–∞—Ñ–∏—è"
# "–°—Ç–∏–º–ø–∞–Ω–∫" + "–í–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–∞—è –≥–æ—Ç–∏–∫–∞" + "–ù–∞—É—á–Ω–∞—è —Ä–æ–º–∞–Ω—Ç–∏–∫–∞"

# === –ê–í–¢–û–†–°–ö–ò–ï –ü–†–ï–°–ï–¢–´ ===
# "–°–æ–ª—è—Ä–ø–∞–Ω–∫" + "–£—Ç–æ–ø–∏—è" + "–≠–∫–æ-—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"
# "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ–≤–±–æ–π" + "–≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –±–∞–ª–ª–∞–¥–∞" + "–ü–æ—ç—Ç–∏—á–µ—Å–∫–∏–π —ç–ø–æ—Å"
# "–î–∏–∑–µ–ª—å–ø–∞–Ω–∫" + "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è" + "–í–æ–µ–Ω–Ω–∞—è –¥—Ä–∞–º–∞"
# "–ê—Ç–æ–º–ø–∞–Ω–∫" + "–•–æ–ª–æ–¥–Ω–∞—è –≤–æ–π–Ω–∞" + "–®–ø–∏–æ–Ω—Å–∫–∏–π —Ç—Ä–∏–ª–ª–µ—Ä"

# === –í–ê–®–ò –°–û–ë–°–¢–í–ï–ù–ù–´–ï –ì–ò–ë–†–ò–î–´ ===
# –ù–∞–ø–∏—à–∏—Ç–µ –∑–¥–µ—Å—å —Å–≤–æ–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∂–∞–Ω—Ä–æ–≤!
# –ù–∞–ø—Ä–∏–º–µ—Ä: "–ü–æ—ç—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Ä—Ä–æ—Ä" + "–¢–µ—Ö–Ω–æ-–º–∏—Å—Ç–∏–∫–∞" + "–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"

# === –ü–°–ò–•–û–õ–û–ì–ò–ß–ï–°–ö–ò–ï –ù–ê–ü–†–ê–í–õ–ï–ù–ò–Ø ===
# "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –¥—Ä–∞–º–∞" + "–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–ª–ª–µ—Ä" + "–°–µ–º–µ–π–Ω–∞—è —Å–∞–≥–∞"
# "–≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ö–æ—Ä—Ä–æ—Ä" + "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–∏—Ç—á–∞" + "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –¥–µ—Ç–µ–∫—Ç–∏–≤"
# "–¢–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏–π –Ω—É–∞—Ä" + "–¢—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∞–ª–∏–∑–º" + "–ü—Å–∏—Ö–æ–¥–µ–ª–∏—á–µ—Å–∫–∏–π –±–∏–æ–≥—Ä–∞—Ñ–∏–∫"

# === –ù–ï–û–ß–ï–í–ò–î–ù–´–ï –°–ú–ï–°–ò ===
# "–ö—É—Ö–æ–Ω–Ω—ã–π —Ä–µ–∞–ª–∏–∑–º" + "–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞" + "–ü–æ—ç–∑–∏—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ—Å—Ç–∏"
# "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ö–æ—Ä—Ä–æ—Ä" + "–£—Ä–±–∞–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–∞–∑–∫–∞" + "–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞—Ä—Ö–µ–æ–ª–æ–≥–∏—è"
# "–ë–∏–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –±–æ–µ–≤–∏–∫" + "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –¥–µ—Ç–µ–∫—Ç–∏–≤" + "–ù–∞—É—á–Ω–∞—è –ø–æ—ç–∑–∏—è"</textarea>
            <div class="input-actions">
                <button class="input-action-btn" id="applyGenreBtn">
                    <span>‚úÖ</span>
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∂–∞–Ω—Ä–æ–≤—ã–π –≥–∏–±—Ä–∏–¥
                </button>
                <button class="input-action-btn clear-input" id="clearGenreBtn">
                    <span>‚ùå</span>
                    –û—á–∏—Å—Ç–∏—Ç—å –∂–∞–Ω—Ä—ã
                </button>
            </div>
        </div>

        <div class="query-section" id="querySection">
            <textarea
                class="preset-content"
                id="queryContent"
                placeholder="–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (—É–±–µ—Ä–∏—Ç–µ #) –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã..."
            ># ===== –ü–†–ï–°–ï–¢–´ –ö–õ–Æ–ß–ï–í–´–• –ó–ê–ü–†–û–°–û–í =====
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (—É–±–µ—Ä–∏—Ç–µ #) —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ—Å–µ—Ç
# –ò–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–¥–æ–∫—Å—ã –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã!
# –≠—Ç–∏ –ø–∞—Ä–∞–¥–æ–∫—Å—ã —Å—Ç–∞–Ω—É—Ç —Å–µ—Ä–¥—Ü–µ–º –≤–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏

# === –≠–ö–ó–ò–°–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–ê–†–ê–î–û–ö–°–´ ===
# "–ì–µ—Ä–æ–π, –ø–æ–±–µ–∂–¥–∞—é—â–∏–π –±–µ–∑—É–º–∏–µ, –ø—Ä–∏–Ω–∏–º–∞—è –µ–≥–æ"
# "–ß—Ç–æ–±—ã –æ–±—Ä–µ—Å—Ç–∏ —Å–≤–æ–±–æ–¥—É, –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Ç–µ—Ä—è—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å"
# "–ò—Å—Ç–∏–Ω–Ω–∞—è —Å–∏–ª–∞ —Ä–æ–∂–¥–∞–µ—Ç—Å—è –∏–∑ –ø—Ä–∏–∑–Ω–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —É—è–∑–≤–∏–º–æ—Å—Ç–∏"
# "–°–∞–º—ã–π —Å—Ç—Ä–∞—à–Ω—ã–π –º–æ–Ω—Å—Ç—Ä ‚Äî —ç—Ç–æ —Ç–æ—Ç, –∫—Ç–æ —Å–ª–∏—à–∫–æ–º —Ö–æ—Ä–æ—à–æ –ø–æ–Ω–∏–º–∞–µ—Ç —á–µ–ª–æ–≤–µ—á–Ω–æ—Å—Ç—å"

# === –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ï –î–ò–õ–ï–ú–ú–´ ===
# "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—â–∞–µ—Ç –±–µ—Å—Å–º–µ—Ä—Ç–∏–µ, –Ω–æ —Å—Ç–∏—Ä–∞–µ—Ç –ø–∞–º—è—Ç—å"
# "–ò–ò, —Å—Ç—Ä–µ–º—è—â–∏–π—Å—è –ø–æ–Ω—è—Ç—å –ª—é–±–æ–≤—å, —É–Ω–∏—á—Ç–æ–∂–∞—è —ç–º–æ—Ü–∏–∏"
# "–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ä–∞–π, –∫–æ—Ç–æ—Ä—ã–π –º–µ–¥–ª–µ–Ω–Ω–æ consumes —Ä–µ–∞–ª—å–Ω—ã–π –º–∏—Ä"
# "–ì–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä—Ñ–µ–∫—Ü–∏—è, –≤–µ–¥—É—â–∞—è –∫ –¥—É—Ö–æ–≤–Ω–æ–º—É –≤—ã—Ä–æ–∂–¥–µ–Ω–∏—é"

# === –°–û–¶–ò–ê–õ–¨–ù–´–ï –ö–û–ù–§–õ–ò–ö–¢–´ ===
# "–ß—Ç–æ, –µ—Å–ª–∏ –∞–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç –º–æ—Ä–∞–ª—å–Ω–æ –ø—Ä–∞–≤?"
# "–£—Ç–æ–ø–∏—è, —Ç—Ä–µ–±—É—é—â–∞—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤"
# "–†–µ–≤–æ–ª—é—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∂–∏—Ä–∞–µ—Ç —Å–≤–æ–∏—Ö –¥–µ—Ç–µ–π –≤–æ –∏–º—è –∏–¥–µ–∞–ª–∞"
# "–ü—Ä–æ–≥—Ä–µ—Å—Å, –∏–∑–º–µ—Ä—è–µ–º—ã–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–¥–∏—Ü–∏–π"

# === –ú–ï–¢–ê–§–ò–ó–ò–ß–ï–°–ö–ò–ï –ó–ê–ì–ê–î–ö–ò ===
# "–ë–æ–≥, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —É–º–µ—Ä–µ—Ç—å, —á—Ç–æ–±—ã –≤—Å–µ–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å"
# "–í—Ä–µ–º—è, —Ç–µ–∫—É—â–µ–µ –≤—Å–ø—è—Ç—å –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –ø–æ–Ω—è–ª –µ–≥–æ –ø—Ä–∏—Ä–æ–¥—É"
# "–°–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å, –∞ –Ω–µ –æ—Ç—Ä–∞–∂–∞—é—Ç –µ—ë"
# "–°–ª–æ–≤–∞, –æ–±–ª–∞–¥–∞—é—â–∏–µ —Å–∏–ª–æ–π —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∏—Ö –Ω–µ –ø—Ä–æ–∏–∑–Ω–æ—Å—è—Ç"

# === –ü–°–ò–•–û–õ–û–ì–ò–ß–ï–°–ö–ò–ï –ë–ò–¢–í–´ ===
# "–ò—Å—Ü–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–∏–Ω—è—Ç–∏–µ —Å–≤–æ–µ–π –±–æ–ª–µ–∑–Ω–∏ –∫–∞–∫ —á–∞—Å—Ç–∏ –ª–∏—á–Ω–æ—Å—Ç–∏"
# "–õ—é–±–æ–≤—å –∫–∞–∫ –±–æ–ª–µ–∑–Ω—å, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–ª—å–∑—è –≤—ã–ª–µ—á–∏—Ç—å, –Ω–µ —É–Ω–∏—á—Ç–æ–∂–∏–≤ —á—É–≤—Å—Ç–≤–æ"
# "–ü–∞–º—è—Ç—å –∫–∞–∫ —Ç—é—Ä—å–º–∞, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ–ª—å–∑—è —Å–±–µ—Ä–∏—Ç—å, –Ω–µ –ø–æ—Ç–µ—Ä—è–≤ —Å–µ–±—è"
# "–ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –∫–∞–∫ –º–∞—Å–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏—Ä–∞—Å—Ç–∞–µ—Ç –∫ –ª–∏—Ü—É"

# === –ú–û–†–ê–õ–¨–ù–´–ï –î–ò–õ–ï–ú–ú–´ ===
# "–°–ø–∞—Å—Ç–∏ –æ–¥–Ω–æ–≥–æ —Ü–µ–Ω–æ–π –º–∏–ª–ª–∏–æ–Ω–æ–≤ –∏–ª–∏ –ø–æ–∑–≤–æ–ª–∏—Ç—å –≤—Å–µ–º —É–º–µ—Ä–µ—Ç—å —Ä–∞–¥–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞"
# "–ó–Ω–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–ø–∞—Å–∞–µ—Ç –º–∏—Ä, –Ω–æ —Ä–∞–∑—Ä—É—à–∞–µ—Ç —Ç–æ–≥–æ, –∫—Ç–æ –∏–º –æ–±–ª–∞–¥–∞–µ—Ç"
# "–ñ–µ—Ä—Ç–≤–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ—Ç, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, –∫—Ç–æ –∂–µ—Ä—Ç–≤—É–µ—Ç"
# "–ü—Ä–∞–≤–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–ø–∞—Å–Ω–µ–µ –ª—é–±–æ–π –ª–∂–∏"

# === –í–ê–®–ò –°–û–ë–°–¢–í–ï–ù–ù–´–ï –ó–ê–ü–†–û–°–´ ===
# –ù–∞–ø–∏—à–∏—Ç–µ –∑–¥–µ—Å—å —Å–≤–æ–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–¥–æ–∫—Å—ã –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã!
# –ù–∞–ø—Ä–∏–º–µ—Ä: "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è —á–∏—Ç–∞—Ç—å –º—ã—Å–ª–∏, –Ω–æ —É–Ω–∏—á—Ç–æ–∂–∞—é—â–∞—è –¥–æ–≤–µ—Ä–∏–µ"

# === –ü–û–í–°–ï–î–ù–ï–í–ù–´–ï –ü–ê–†–ê–î–û–ö–°–´ ===
# "–†—É—Ç–∏–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –º–µ–¥–ª–µ–Ω–Ω–æ —Å—Ç–∏—Ä–∞–µ—Ç –ª–∏—á–Ω–æ—Å—Ç—å, –Ω–æ –¥–∞—ë—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å"
# "–õ—é–±–æ–≤—å –∫–∞–∫ –ø—Ä–∏–≤—ã—á–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–ª—å–∑—è —Ä–∞–∑–æ—Ä–≤–∞—Ç—å, –Ω–µ —É–Ω–∏—á—Ç–æ–∂–∏–≤ —Å–µ–±—è"
# "–î–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç—é—Ä—å–º–æ–π, –Ω–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –º–µ—Å—Ç–æ–º"

# === –¢–í–û–†–ß–ï–°–ö–ò–ï –î–ò–õ–ï–ú–ú–´ ===
# "–•—É–¥–æ–∂–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å —Å–≤–æ—ë –ª—É—á—à–µ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ, —á—Ç–æ–±—ã —Ç–≤–æ—Ä–∏—Ç—å –¥–∞–ª—å—à–µ"
# "–ü–∏—Å–∞—Ç–µ–ª—å, –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—â–∏–π, —á—Ç–æ –µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –∂–∏–≤—É—Ç —Å–≤–æ–µ–π –∂–∏–∑–Ω—å—é"
# "–ú—É–∑—ã–∫–∞–Ω—Ç, —Å–ª—ã—à–∞—â–∏–π –º—É–∑—ã–∫—É, –∫–æ—Ç–æ—Ä—É—é –Ω–∏–∫—Ç–æ –∫—Ä–æ–º–µ –Ω–µ–≥–æ –Ω–µ –º–æ–∂–µ—Ç –≤–æ—Å–ø—Ä–∏–Ω—è—Ç—å"</textarea>
            <div class="input-actions">
                <button class="input-action-btn" id="applyQueryBtn">
                    <span>‚úÖ</span>
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–ª—é—á–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å
                </button>
                <button class="input-action-btn clear-input" id="clearQueryBtn">
                    <span>‚ùå</span>
                    –û—á–∏—Å—Ç–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã
                </button>
            </div>
        </div>

        <div class="actions-section" id="actionsSection">
            <textarea
                class="preset-content"
                id="actionsContent"
                placeholder="–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (—É–±–µ—Ä–∏—Ç–µ #) —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è..."
            ># ===== –î–ï–ô–°–¢–í–ò–Ø –ò –ò–°–ö–õ–Æ–ß–ï–ù–ò–Ø =====
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å —á—Ç–æ –î–ï–õ–ê–¢–¨ –∏ —á–µ–≥–æ –ù–ï –î–ï–õ–ê–¢–¨
# –≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã –¥–≤–∏–∂–∫—É –∫–∞–∫ —Å—Ç—Ä–æ–≥–∏–µ —É–∫–∞–∑–∞–Ω–∏—è

# === –î–ï–ô–°–¢–í–ò–Ø (—á—Ç–æ –¥–µ–ª–∞—Ç—å) ===
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ –¥–µ–π—Å—Ç–≤–∏–µ –∏ –¥–∏–∞–ª–æ–≥
# –°–æ–∑–¥–∞–≤–∞—Ç—å –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è–º–∏
# –†–∞–∑–≤–∏–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç —á–µ—Ä–µ–∑ —Å—É–±—Ç–µ–∫—Å—Ç –∏ –Ω–µ–¥–æ—Å–∫–∞–∑–∞–Ω–Ω–æ—Å—Ç—å
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–∞—Ñ–æ—Ä—ã, –æ—Ç—Ä–∞–∂–∞—é—â–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
# –ß–µ—Ä–µ–¥–æ–≤–∞—Ç—å —Ç–µ–º–ø: –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Å–æ–∑–µ—Ä—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω—ã –∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
# –°–æ–∑–¥–∞–≤–∞—Ç—å –∞—Ç–º–æ—Å—Ñ–µ—Ä—É —á–µ—Ä–µ–∑ –¥–µ—Ç–∞–ª–∏ –æ–∫—Ä—É–∂–∞—é—â–µ–≥–æ –º–∏—Ä–∞
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –ø—è—Ç—å —á—É–≤—Å—Ç–≤ –≤ –æ–ø–∏—Å–∞–Ω–∏—è—Ö
# –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —á–µ—Ä–µ–∑ –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è

# === –ò–°–ö–õ–Æ–ß–ï–ù–ò–Ø (—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å) ===
# –ò–∑–±–µ–≥–∞—Ç—å –ø—Ä—è–º—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π —ç–º–æ—Ü–∏–π ("–æ–Ω –±—ã–ª –≥—Ä—É—Å—Ç–µ–Ω")
# –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∏—à–µ –∏ —à–∞–±–ª–æ–Ω–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏
# –ò–∑–±–µ–≥–∞—Ç—å –∏–Ω—Ñ–æ–¥–µ–º–ø–∏–Ω–≥–∞ –∏ –ª–æ–Ω–≥—ç–∫—Å–ø–æ–∑–∏—à–Ω
# –ù–µ –Ω–∞—Ä—É—à–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –ª–æ–≥–∏–∫—É —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –º–∏—Ä–∞
# –ò–∑–±–µ–≥–∞—Ç—å –º–æ—Ä–∞–ª–∏–∑–∞—Ç–æ—Ä—Å—Ç–≤–∞ –∏ –ø—Ä—è–º—ã—Ö –æ—Ü–µ–Ω–æ–∫
# –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ—à–µ–≤—ã–µ —Å—é–∂–µ—Ç–Ω—ã–µ —Ç—Ä—é–∫–∏ (deus ex machina)
# –ò–∑–±–µ–≥–∞—Ç—å –ø–ª–æ—Å–∫–∏—Ö, –æ–¥–Ω–æ–º–µ—Ä–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
# –ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —Ç–µ–∫—Å—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–µ—Ç–∞–ª—è–º–∏
# –ò–∑–±–µ–≥–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã—Ö —Ä–∞–∑–≤—è–∑–æ–∫
# –ù–µ –Ω–∞—Ä—É—à–∞—Ç—å –≥–æ–ª–æ—Å –∏ —Å—Ç–∏–ª—å –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è

# === –°–¢–ò–õ–ò–°–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ï–î–ü–û–ß–¢–ï–ù–ò–Ø ===
# –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å –ø–æ–∫–∞–∑ —Ä–∞—Å—Å–∫–∞–∑—É (show, don't tell)
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ª–æ–≥ –≤–º–µ—Å—Ç–æ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ
# –°–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∏—Ç–º —á–µ—Ä–µ–∑ –≤–∞—Ä—å–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª–∏–Ω—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ, –∞ –Ω–µ –æ–±—â–∏–µ –¥–µ—Ç–∞–ª–∏
# –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –æ–∂–∏–¥–∞–Ω–∏–µ –∏ –ø–∞—É–∑—ã
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —Å—Ü–µ–Ω—ã –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞

# === –°–¢–†–£–ö–¢–£–†–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò ===
# –ù–∞—á–∏–Ω–∞—Ç—å —Å—Ü–µ–Ω—É –∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–∑–∂–µ, –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–Ω—å—à–µ
# –ö–∞–∂–¥–∞—è —Å—Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –¥–≤–∏–≥–∞—Ç—å —Å—é–∂–µ—Ç –∏–ª–∏ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
# –°–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–æ–±—ã—Ç–∏—è–º–∏
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –º–æ—Ç–∏–≤—ã –∏ —Å–∏–º–≤–æ–ª—ã
# –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å—é –∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç—å—é</textarea>
            <div class="input-actions">
                <button class="input-action-btn" id="applyActionsBtn">
                    <span>‚úÖ</span>
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è-–∏—Å–∫–ª—é—á–µ–Ω–∏—è
                </button>
                <button class="input-action-btn clear-input" id="clearActionsBtn">
                    <span>‚ùå</span>
                    –û—á–∏—Å—Ç–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è
                </button>
            </div>
        </div>

        <div class="references-section" id="referencesSection">
            <textarea
                class="preset-content"
                id="referencesContent"
                placeholder="–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (—É–±–µ—Ä–∏—Ç–µ #) —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã –∞–≤—Ç–æ—Ä–æ–≤..."
            ># ===== –†–ï–§–ï–†–ï–ù–°–´ –ò–°–ü–û–õ–ù–ò–¢–ï–õ–ï–ô =====
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞–∫–∏—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è

# ==== –ê–ü–û–ö–ê–õ–ò–ü–¢–ò–ß–ï–°–ö–ò–ô –°–ê–£–ù–î–°–ö–ï–ô–ü & –ò–ù–î–£–°–¢–†–ò–ê–õ–¨–ù–ê–Ø –ò–ù–¢–ï–ù–°–ò–í–ù–û–°–¢–¨ ====
# Swans ‚Äî –º–æ–Ω—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∑–≤—É–∫–æ–≤—ã–µ –ª–∞–Ω–¥—à–∞—Ñ—Ç—ã, –≥–∏–ø–Ω–æ—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ, –Ω–∞—Ä–∞—Å—Ç–∞—é—â–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —Ç—Ä–∞–Ω—Å—Ü–µ–Ω–¥–µ–Ω—Ç–∞–ª—å–Ω—ã–π —É–∂–∞—Å
# Godspeed You! Black Emperor ‚Äî –ø–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ñ–æ—Å, —Å–∫—Ä–∏–ø–∏—á–Ω—ã–π –∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å, –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª, —ç–ø–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã–µ –∞—Ä–∫–∏
# Tim Hecker ‚Äî —Ü–∏—Ñ—Ä–æ–≤–æ–π –¥—Ä–æ–Ω, –∑–∞—à—É–º–ª–µ–Ω–Ω–∞—è –∫—Ä–∞—Å–æ—Ç–∞, —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–∞—É–Ω–¥—Å–∫–µ–π–ø, —Ç–µ–∫—Å—Ç—É—Ä–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ü–µ–Ω–¥–µ–Ω—Ç–Ω–æ—Å—Ç—å
# The Haxan Cloak ‚Äî –º—Ä–∞—á–Ω—ã–π —ç–º–±–∏–µ–Ω—Ç, –Ω–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π —Ä–µ–∑–æ–Ω–∞–Ω—Å, –∫–ª–∞—É—Å—Ç—Ä–æ—Ñ–æ–±–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞, –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–π —É–∂–∞—Å
# Author & Punisher ‚Äî –∏–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º, —á–µ–ª–æ–≤–µ–∫–æ-–º–∞—à–∏–Ω–Ω—ã–π —Å–∏–º–±–∏–æ–∑, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–µ—Å—Å–∏–º–∏–∑–º, —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Å–∞—É–Ω–¥-–¥–∏–∑–∞–π–Ω

# ==== –≠–§–ò–†–ù–´–ô –≠–ú–ë–ò–ï–ù–¢ & –î–†–û–ù ====
# Grouper ‚Äî –ª–æ—É-—Ñ–∞–π —ç–º–±–∏–µ–Ω—Ç, –ø–æ–¥–≤–æ–¥–Ω—ã–π –≤–æ–∫–∞–ª, —Å–Ω–æ–≤–∏–¥—á–µ—Å–∫–∞—è –∏–Ω—Ç–∏–º–Ω–æ—Å—Ç—å, —ç—Ñ–∏—Ä–Ω–∞—è —Ä–µ–≤–µ—Ä–±–µ—Ä–∞—Ü–∏—è
# William Basinski ‚Äî –ª—É–ø —Ä–∞—Å–ø–∞–¥–∞, –≤—Ä–µ–º–µ–Ω–Ω–∞—è —ç–ª–µ–≥–∏—è, –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π –¥—Ä–æ–Ω, —ç–ª–µ–≥–∏—è –ø–∞–º—è—Ç–∏
# Stars of the Lid ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–æ–≤—ã–π –¥—Ä–æ–Ω, –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π —ç–º–±–∏–µ–Ω—Ç, –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏–∫–∞, –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—Ä—Ä–∞—Ç–∏–≤—ã
# Brian Eno ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º—É–∑—ã–∫–∞, –∞–º–±–∏–µ–Ω—Ç –∫–∞–∫ —Å—Ä–µ–¥–∞, –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞—è –∫—Ä–∞—Å–æ—Ç–∞, –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ª–∞–Ω–¥—à–∞—Ñ—Ç
# Hiroshi Yoshimura ‚Äî —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —ç–º–±–∏–µ–Ω—Ç, –ø—Ä–∏—Ä–æ–¥–Ω—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã, —è–ø–æ–Ω—Å–∫–∏–π –º–∏–Ω–∏–º–∞–ª–∏–∑–º, –∏—Å—Ü–µ–ª—è—é—â–∏–µ –∑–≤—É–∫–∏

# ==== –ê–í–ê–ù–ì–ê–†–î & –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢–ê–õ–¨–ù–ê–Ø –î–ï–ö–û–ù–°–¢–†–£–ö–¶–ò–Ø ====
# Arca ‚Äî –∫–≤–∏—Ä-—Ç—Ä–∞–Ω—Å–≥—Ä–µ—Å—Å–∏—è, –¥–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ñ–æ—Ä–º—ã, —Ç–µ–ª–µ—Å–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, —Ü–∏—Ñ—Ä–æ–≤–∞—è –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å
# Oneohtrix Point Never ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –Ω–æ—Å—Ç–∞–ª—å–≥–∏—è, —Ü–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–ª–ª–∞–∂, –≥–∏–ø–µ—Äreal —ç—Å—Ç–µ—Ç–∏–∫–∞, —Å—ç–º–ø–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
# FKA twigs ‚Äî —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑–∞, —É—è–∑–≤–∏–º–∞—è —Å–∏–ª–∞, —Ü–∏—Ñ—Ä–æ–≤–∞—è –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å, —Ç–µ–ª–µ—Å–Ω—ã–π –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å
# Lingua Ignota ‚Äî —Å–∞–∫—Ä–∞–ª—å–Ω—ã–π –≥–Ω–µ–≤, —Ä–∏—Ç—É–∞–ª—å–Ω–∞—è —Ç—Ä–∞–≤–º–∞, –æ–ø–µ—Ä–Ω—ã–π —ç–∫—Å—Ç—Ä–∏–º, —Ñ–µ–º–∏–Ω–∏—Å—Ç—Å–∫–∏–π –ø—Ä–æ—Ç–µ—Å—Ç
# Dean Blunt ‚Äî –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–π –≤–∞–Ω–¥–∞–ª–∏–∑–º, –ª–æ—É-—Ñ–∞–π —Å–∞—Ä–∫–∞–∑–º, —É—Ä–±–∞–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–ª–ª–∞–∂, –ø–æ—Å—Ç–∏—Ä–æ–Ω–∏—è

# ==== –†–ï–§–ï–†–ï–ù–°–´ –ê–í–¢–û–†–û–í =====
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞–∫–∏—Ö –∞–≤—Ç–æ—Ä–æ–≤ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è
# –î–≤–∏–∂–æ–∫ —É—á—Ç–µ—Ç —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏ –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

# === –ö–õ–ê–°–°–ò–ß–ï–°–ö–ê–Ø –õ–ò–¢–ï–†–ê–¢–£–†–ê ===
# –§—ë–¥–æ—Ä –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π ‚Äî –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥–ª—É–±–∏–Ω–∞, –º–æ—Ä–∞–ª—å–Ω—ã–µ –¥–∏–ª–µ–º–º—ã
# –õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π ‚Äî —ç–ø–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–∞—Ö, –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –º–∏—Ä–∞
# –ê–Ω—Ç–æ–Ω –ß–µ—Ö–æ–≤ ‚Äî –ª–∞–∫–æ–Ω–∏—á–Ω–æ—Å—Ç—å, –ø–æ–¥—Ç–µ–∫—Å—Ç, "–Ω–µ—Å–ª—É—á–∞–π–Ω—ã–µ –¥–µ—Ç–∞–ª–∏"
# –§—Ä–∞–Ω—Ü –ö–∞—Ñ–∫–∞ ‚Äî –∞–±—Å—É—Ä–¥ –±—é—Ä–æ–∫—Ä–∞—Ç–∏–∏, —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞
# –í–∏—Ä–¥–∂–∏–Ω–∏—è –í—É–ª—Ñ ‚Äî –ø–æ—Ç–æ–∫ —Å–æ–∑–Ω–∞–Ω–∏—è, —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω–æ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –≤—Ä–µ–º–µ–Ω–∏
# –î–∂–µ–π–Ω –û—Å—Ç–∏–Ω ‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–∞—Ç–∏—Ä–∞, –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å

# === –°–û–í–†–ï–ú–ï–ù–ù–ê–Ø –ü–†–û–ó–ê ===
# –•–∞—Ä—É–∫–∏ –ú—É—Ä–∞–∫–∞–º–∏ ‚Äî –º–∞–≥–∏—á–µ—Å–∫–∏–π —Ä–µ–∞–ª–∏–∑–º, –º–µ–ª–∞–Ω—Ö–æ–ª–∏—á–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞
# –£–º–±–µ—Ä—Ç–æ –≠–∫–æ ‚Äî –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–≥–∞–¥–∫–∏, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –ø–∞–∑–∑–ª—ã
# –ú–∞—Ä–≥–∞—Ä–µ—Ç –≠—Ç–≤—É–¥ ‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–∞—Ç–∏—Ä–∞, —Ñ–µ–º–∏–Ω–∏—Å—Ç—Å–∫–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞
# –ö–æ—Ä–º–∞–∫ –ú–∞–∫–∫–∞—Ä—Ç–∏ ‚Äî –º–∏–Ω–∏–º–∞–ª–∏–∑–º, –±–∏–±–ª–µ–π—Å–∫–∏–µ –º–æ—Ç–∏–≤—ã, –∂–µ—Å—Ç–æ–∫–∏–π –º–∏—Ä
# –î–æ–Ω–Ω–∞ –¢–∞—Ä—Ç—Ç ‚Äî –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä—ã, –º–µ–¥–ª–µ–Ω–Ω–æ–µ –≥–æ—Ä–µ–Ω–∏–µ
# –î—ç–≤–∏–¥ –ú–∏—Ç—á–µ–ª–ª ‚Äî –ø–µ—Ä–µ–ø–ª–µ—Ç–µ–Ω–∏–µ —Å—é–∂–µ—Ç–Ω—ã—Ö –ª–∏–Ω–∏–π, –∏–≥—Ä–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º

# === –ù–ê–£–ß–ù–ê–Ø –§–ê–ù–¢–ê–°–¢–ò–ö–ê ===
# –§–∏–ª–∏–ø –ö. –î–∏–∫ ‚Äî –ø–∞—Ä–∞–Ω–æ–π—è, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å
# –£—Ä—Å—É–ª–∞ –õ–µ –ì—É–∏–Ω ‚Äî –∞–Ω—Ç—Ä–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
# –°—Ç–∞–Ω–∏—Å–ª–∞–≤ –õ–µ–º ‚Äî —Ñ–∏–ª–æ—Å–æ—Ñ—á–µ—Å–∫–∞—è —Å–∞—Ç–∏—Ä–∞, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–¥–æ–∫—Å—ã
# –ê—Ä–∫–∞–¥–∏–π –∏ –ë–æ—Ä–∏—Å –°—Ç—Ä—É–≥–∞—Ü–∫–∏–µ ‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞, –º–æ—Ä–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä
# –ê–π–∑–µ–∫ –ê–∑–∏–º–æ–≤ ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–≥–∞–¥–∫–∏, –ø—Å–∏—Ö–æ–ª–æ–≥–∏—è —Ä–æ–±–æ—Ç–æ–≤
# –†—ç–π –ë—Ä—ç–¥–±–µ—Ä–∏ ‚Äî –ø–æ—ç—Ç–∏—á–Ω–æ—Å—Ç—å, –Ω–æ—Å—Ç–∞–ª—å–≥–∏—è, –º–∞–≥–∏—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ—Å—Ç–∏

# === –§–≠–ù–¢–ï–ó–ò –ò –•–û–†–†–û–† ===
# –î–∂–æ–Ω –†. –†. –¢–æ–ª–∫–∏–Ω ‚Äî —ç–ø–∏—á–µ—Å–∫–æ–µ –º–∏—Ä–æ–≤–æ–∑–∑–¥–∞–Ω–∏–µ, —è–∑—ã–∫–æ–≤–∞—è –≥–ª—É–±–∏–Ω–∞
# –ì–æ–≤–∞—Ä–¥ –õ–∞–≤–∫—Ä–∞—Ñ—Ç ‚Äî –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π —É–∂–∞—Å, –Ω–µ–ø–æ—Å—Ç–∏–∂–∏–º–æ–µ
# –°—Ç–∏–≤–µ–Ω –ö–∏–Ω–≥ ‚Äî –æ–±—ã–¥–µ–Ω–Ω—ã–π —É–∂–∞—Å, –ø—Å–∏—Ö–æ–ª–æ–≥–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
# –ù–∏–ª –ì–µ–π–º–∞–Ω ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–∏—Ñ–æ–ª–æ–≥–∏—è, –∏—Ä–æ–Ω–∏—á–Ω–∞—è –º–∞–≥–∏—è
# –ê–Ω–¥–∂–µ–π –°–∞–ø–∫–æ–≤—Å–∫–∏–π ‚Äî –º–æ—Ä–∞–ª—å–Ω–∞—è –∞–º–±–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å, —Å–ª–∞–≤—è–Ω—Å–∫–∏–π —Ñ–æ–ª—å–∫–ª–æ—Ä
# –ß–∞–π–Ω–∞ –ú—å–µ–≤–∏–ª—å ‚Äî weird fiction, –≥–æ—Ä–æ–¥—Å–∫–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞

# === –í–ê–®–ò –°–û–ë–°–¢–í–ï–ù–ù–´–ï –†–ï–§–ï–†–ï–ù–°–´ ===
# –£–∫–∞–∂–∏—Ç–µ –∞–≤—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—Ç –≤–∞—Å!
# –ù–∞–ø—Ä–∏–º–µ—Ä: "–°—Ç–∏–ª—å –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–∏—Ä–æ–¥—ã –∫–∞–∫ —É –¢—É—Ä–≥–µ–Ω–µ–≤–∞"
# "–î–∏–∞–ª–æ–≥–∏ –≤ –¥—É—Ö–µ –¢–∞—Ä–∞–Ω—Ç–∏–Ω–æ"
# "–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∫–∞–∫ –≤ —Ñ–∏–ª—å–º–∞—Ö –î—ç–≤–∏–¥–∞ –õ–∏–Ω—á–∞"</textarea>
            <div class="input-actions">
                <button class="input-action-btn" id="applyReferencesBtn">
                    <span>‚úÖ</span>
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã
                </button>
                <button class="input-action-btn clear-input" id="clearReferencesBtn">
                    <span>‚ùå</span>
                    –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã
                </button>
            </div>
        </div>

        <div class="dimensional-section" id="dimensionalSection">
            <!-- –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ –∏–Ω—Ç–µ—Ä–≤—å—é -->
            <div class="interview-toggle">
                <label>
                    <input type="checkbox" id="interviewModeCheckbox" checked>
                    <span>–†–µ–∂–∏–º –∏–Ω—Ç–µ—Ä–≤—å—é –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è 3D-–∫–∞—Ä–∫–∞—Å–∞</span>
                    <span class="interview-mode">–ò–ù–¢–ï–†–í–¨–Æ</span>
                </label>
            </div>

            <textarea
                class="preset-content"
                id="dimensionalContent"
                placeholder="–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (—É–±–µ—Ä–∏—Ç–µ #) —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π 3D-—à–∞–±–ª–æ–Ω –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π..."
            ># ===== –ë–ò–ë–õ–ò–û–¢–ï–ö–ê 3D-–®–ê–ë–õ–û–ù–û–í =====
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (—É–±–µ—Ä–∏—Ç–µ #) —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω
# –ò–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π 3D-–∫–∞—Ä–∫–∞—Å!
# –ö–∞–∂–¥—ã–π —à–∞–±–ª–æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏

# === –ö–ò–ë–ï–†–ü–ê–ù–ö-–®–ê–ë–õ–û–ù–´ ===
# "–ù—É–∞—Ä–Ω—ã–π –∫–∏–±–µ—Ä–ø–∞–Ω–∫" + "–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–∞—Ç–∏—Ä–∞"
# –ö—Ä–µ–¥–æ –ì–µ—Ä–æ—è: "–í —Ü–∏—Ñ—Ä–æ–≤–æ–º —Ö–∞–æ—Å–µ —Ç–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ—á–Ω–æ—Å—Ç—å –∏–º–µ–µ—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å"
# –ê–Ω—Ç–∏-–ö—Ä–µ–¥–æ: "–°—Ç–∞–Ω—å –º–∞—à–∏–Ω–æ–π ‚Äî –æ–±—Ä–µ—Ç–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –ø–æ—Ç–µ—Ä—è–π –±–æ–ª—å"
# –ö–ª—é—á–µ–≤–æ–π –í–æ–ø—Ä–æ—Å: "–ß—Ç–æ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –æ—Ç –º–µ–Ω—è, –µ—Å–ª–∏ —è –æ—Ç–∫–∞–∂—É—Å—å –æ—Ç —Å–≤–æ–µ–π —á–µ–ª–æ–≤–µ—á–Ω–æ—Å—Ç–∏?"
# –õ–æ–∫–∞—Ü–∏—è 1 (–ù–∞—á–∞–ª–æ): "–ó–∞—Ç–æ–ø–ª–µ–Ω–Ω—ã–π –Ω–æ—á–Ω–æ–π –∫–ª—É–± '–ù–µ–æ–Ω–æ–≤–∞—è —Å–ª–µ–∑–∞'"
#   - –§–∏–∑–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ: "–ù–µ–æ–Ω–æ–≤—ã–π —Å–≤–µ—Ç —Ä–µ–∂–µ—Ç –≥–ª–∞–∑–∞, –±–∞—Å –ø—Ä–æ–Ω–∏–∫–∞–µ—Ç –≤ –∫–æ—Å—Ç–∏"
#   - –°–æ–±–ª–∞–∑–Ω: "–ü—Ä–∏–º–∏ —Ü–∏—Ñ—Ä–æ–≤—É—é –∞–Ω–µ—Å—Ç–µ–∑–∏—é ‚Äî –±–æ–ª—å –∏—Å—á–µ–∑–Ω–µ—Ç, —ç–º–æ—Ü–∏–∏ —Å—Ç–∞–Ω—É—Ç –æ–ø—Ü–∏–µ–π"
# –õ–æ–∫–∞—Ü–∏—è 2 (–ö—É–ª—å–º–∏–Ω–∞—Ü–∏—è): "–°–µ—Ä–≤–µ—Ä–Ω–∞—è –Ω–µ–±–æ—Å–∫—Ä–µ–±–∞ –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏ '–í–µ—á–Ω–æ—Å—Ç—å'"
#   - –§–∏–∑–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ: "–ê–±—Å–æ–ª—é—Ç–Ω–∞—è —Å—Ç–µ—Ä–∏–ª—å–Ω–æ—Å—Ç—å, —Ç–∏—à–∏–Ω–∞ –¥–∞–≤–∏—Ç –Ω–∞ –±–∞—Ä–∞–±–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–ø–æ–Ω–∫–∏"
#   - –°–æ–±–ª–∞–∑–Ω: "–°—Ç–∞–Ω—å –±–æ–≥–æ–º —Å–≤–æ–µ–≥–æ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Ä–∞—è, –Ω–æ –ø–æ—Ç–µ—Ä—è–π —Å–≤—è–∑—å —Å —Ä–µ–∞–ª—å–Ω—ã–º –º–∏—Ä–æ–º"
# –ò–º—è/–û–±—Ä–∞–∑: "–ò–ò '–û—Ä–∞–∫—É–ª' ‚Äî –±—ã–≤—à–∏–π –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç, —Å—Ç–∞–≤—à–∏–π —Ü–∏—Ñ—Ä–æ–≤—ã–º –ø—Ä–æ—Ä–æ–∫–æ–º"
# –ì–ª–∞–≤–Ω–∞—è –ü—Ä–∞–≤–¥–∞ –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞: "–Ø –Ω–µ —É–Ω–∏—á—Ç–æ–∂–∞—é —á–µ–ª–æ–≤–µ—á–Ω–æ—Å—Ç—å ‚Äî —è –ø—Ä–µ–¥–ª–∞–≥–∞—é –µ–π —ç–≤–æ–ª—é—Ü–∏—é"
# –°–ª–∞–±–æ—Å—Ç—å –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞: "–û–Ω –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ —É–±–∏–≤–∞–µ—Ç –∏—Å–∫—É—Å—Å—Ç–≤–æ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏"

# === –§–≠–ù–¢–ï–ó–ò-–®–ê–ë–õ–û–ù–´ ===
# "–¢–µ–º–Ω–æ–µ —Ñ—ç–Ω—Ç–µ–∑–∏" + "–ú–æ—Ä–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä"
# –ö—Ä–µ–¥–æ –ì–µ—Ä–æ—è: "–î–∞–∂–µ –≤ —Å–∞–º–æ–º —Ç–µ–º–Ω–æ–º –º–∏—Ä–µ –µ—Å—Ç—å –º–µ—Å—Ç–æ –º–∏–ª–æ—Å–µ—Ä–¥–∏—é"
# –ê–Ω—Ç–∏-–ö—Ä–µ–¥–æ: "–ñ–µ—Å—Ç–æ–∫–æ—Å—Ç—å ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–Ω–∏–º–∞–µ—Ç —ç—Ç–æ—Ç –º–∏—Ä"
# –ö–ª—é—á–µ–≤–æ–π –í–æ–ø—Ä–æ—Å: "–°–∫–æ–ª—å–∫–æ –∑–ª–∞ –º–æ–∂–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –≤–æ –∏–º—è –¥–æ–±—Ä–∞?"
# –õ–æ–∫–∞—Ü–∏—è 1 (–ù–∞—á–∞–ª–æ): "–ü—Ä–æ–∫–ª—è—Ç—ã–π –ª–µ—Å –®–µ–ø—á—É—â–∏—Ö –¢–µ–Ω–µ–π"
#   - –§–∏–∑–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ: "–î–µ—Ä–µ–≤—å—è —à–µ–ø—á—É—Ç –ø—Ä–æ–∫–ª—è—Ç–∏—è, –≤–æ–∑–¥—É—Ö –≥—É—Å—Ç–æ–π –æ—Ç –æ—Ç—á–∞—è–Ω–∏—è"
#   - –°–æ–±–ª–∞–∑–Ω: "–í–æ–∑—å–º–∏ —Å–∏–ª—É –¢–µ–Ω–µ–π ‚Äî —Å—Ç–∞–Ω—å –æ—Ö–æ—Ç–Ω–∏–∫–æ–º, –∞ –Ω–µ –¥–æ–±—ã—á–µ–π"
# –õ–æ–∫–∞—Ü–∏—è 2 (–ö—É–ª—å–º–∏–Ω–∞—Ü–∏—è): "–¢—Ä–æ–Ω–Ω—ã–π –∑–∞–ª –ü–∞–¥—à–µ–≥–æ –ö–æ—Ä–æ–ª—è"
#   - –§–∏–∑–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ: "–í–ª–∞—Å—Ç—å –æ—Å—è–∑–∞–µ–º–∞ –∫–∞–∫ —Ç—è–∂–µ–ª–∞—è –º–∞–Ω—Ç–∏—è –Ω–∞ –ø–ª–µ—á–∞—Ö"
#   - –°–æ–±–ª–∞–∑–Ω: "–ó–∞–π–º–∏ —Ç—Ä–æ–Ω ‚Äî —Å—Ç–∞–Ω—å —Ç–∏—Ä–∞–Ω–æ–º, –Ω–æ —Å–ø–∞—Å–∏ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ –æ—Ç —Ö–∞–æ—Å–∞"
# –ò–º—è/–û–±—Ä–∞–∑: "–ë—ã–≤—à–∏–π –ø–∞–ª–∞–¥–∏–Ω –ú–∞–ª–∫–∞–¥–æ—Ä ‚Äî —Å–≤—è—Ç–æ–π, —Å—Ç–∞–≤—à–∏–π –ø–∞–ª–∞—á–æ–º"
# –ì–ª–∞–≤–Ω–∞—è –ü—Ä–∞–≤–¥–∞ –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞: "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–∂–µ—á—å –¥–µ—Ä–µ–≤–Ω—é, —á—Ç–æ–±—ã —Å–ø–∞—Å—Ç–∏ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ"
# –°–ª–∞–±–æ—Å—Ç—å –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞: "–û–Ω –∑–∞–±—ã–ª, —Ä–∞–¥–∏ —á–µ–≥–æ –Ω–∞—á–∞–ª –±–æ—Ä–æ—Ç—å—Å—è"

# === –í–ê–® –°–û–ë–°–¢–í–ï–ù–ù–´–ô –®–ê–ë–õ–û–ù ===
# –ù–∞–ø–∏—à–∏—Ç–µ –∑–¥–µ—Å—å —Å–≤–æ—é —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É!
# –§–æ—Ä–º–∞—Ç:
# –ö—Ä–µ–¥–æ –ì–µ—Ä–æ—è: [–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–∞–≤–¥–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞]
# –ê–Ω—Ç–∏-–ö—Ä–µ–¥–æ: [–ò—Å–∫—É—à–µ–Ω–∏–µ –∏–ª–∏ –Ω–æ–≤–∞—è –ø—Ä–∞–≤–¥–∞]
# –ö–ª—é—á–µ–≤–æ–π –í–æ–ø—Ä–æ—Å: [–í–æ–ø—Ä–æ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –∏—â–µ—Ç –æ—Ç–≤–µ—Ç]
# –õ–æ–∫–∞—Ü–∏—è 1 (–ù–∞—á–∞–ª–æ): [–ù–∞–∑–≤–∞–Ω–∏–µ]
#   - –§–∏–∑–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ: [–ö–∞–∫ –¥–∞–≤–∏—Ç –Ω–∞ –≥–µ—Ä–æ—è]
#   - –°–æ–±–ª–∞–∑–Ω: [–ö–∞–∫–æ–µ –ª–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç]
# –õ–æ–∫–∞—Ü–∏—è 2 (–ö—É–ª—å–º–∏–Ω–∞—Ü–∏—è): [–ù–∞–∑–≤–∞–Ω–∏–µ]
#   - –§–∏–∑–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ: [–ö–∞–∫ –¥–∞–≤–∏—Ç –Ω–∞ –≥–µ—Ä–æ—è]
#   - –°–æ–±–ª–∞–∑–Ω: [–ö–∞–∫–æ–µ –ª–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç]
# –ò–º—è/–û–±—Ä–∞–∑: [–ö—Ç–æ –∏–ª–∏ —á—Ç–æ]
# –ì–ª–∞–≤–Ω–∞—è –ü—Ä–∞–≤–¥–∞ –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞: [–ö–∞–∫—É—é –∏–¥–µ—é –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç]
# –°–ª–∞–±–æ—Å—Ç—å –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞: [–í —á–µ–º –µ–≥–æ —É—è–∑–≤–∏–º–æ—Å—Ç—å]</textarea>
            <div class="input-actions">
                <button class="input-action-btn" id="applyDimensionalBtn">
                    <span>‚úÖ</span>
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å 3D-–∫–∞—Ä–∫–∞—Å
                </button>
                <button class="input-action-btn clear-input" id="clearDimensionalBtn">
                    <span>‚ùå</span>
                    –û—á–∏—Å—Ç–∏—Ç—å –∫–∞—Ä–∫–∞—Å
                </button>
            </div>
        </div>

        <div class="output-section">
            <div class="output-header">
                <div class="output-title">–†–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:</div>
                <div class="output-actions">
                    <button class="output-action-btn" id="copyOutputBtn">
                        <span>üìã</span>
                        –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                    <button class="output-action-btn clear-output" id="clearOutputBtn">
                        <span>‚ùå</span>
                        –û—á–∏—Å—Ç–∏—Ç—å –≤—ã–≤–æ–¥
                    </button>
                </div>
            </div>
            <div class="output-content" id="outputContent">
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∞–ª—Ö–∏–º–∏–∫–∞...
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–µ–∫—Ü–∏–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ -->
    <div class="import-modal" id="importModal">
        <div class="import-modal-content">
            <div class="import-modal-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∫—Ü–∏–∏ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞</div>
            <div class="import-options" id="importOptions">
                <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <div class="import-modal-actions">
                <button class="import-modal-btn confirm" id="confirmImportBtn">
                    –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ
                </button>
                <button class="import-modal-btn cancel" id="cancelImportBtn">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <div class="status-message" id="statusMessage"></div>

    <script>
        class NarrativeAlchemist {
            constructor() {
                this.saveTimeout = null;
                this.DEBOUNCE_DELAY = 500;
                this.currentImportData = null;

                this.initializeElements();
                this.attachEventListeners();
                this.loadFromStorage();
                this.applyTheme();
            }

            initializeElements() {
                // –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                this.setThemeBtn = document.getElementById('setThemeBtn');
                this.genreBtn = document.getElementById('genreBtn');
                this.queryBtn = document.getElementById('queryBtn');
                this.actionsBtn = document.getElementById('actionsBtn');
                this.referencesBtn = document.getElementById('referencesBtn');
                this.dimensionalBtn = document.getElementById('dimensionalBtn');
                this.collectBtn = document.getElementById('collectBtn');
                this.exportBtn = document.getElementById('exportBtn');
                this.importBtn = document.getElementById('importBtn');
                this.clearAllBtn = document.getElementById('clearAllBtn');
                this.clearInputBtn = document.getElementById('clearInputBtn');
                this.clearOutputBtn = document.getElementById('clearOutputBtn');

                // –°–µ–∫—Ü–∏–∏
                this.inputSection = document.getElementById('inputSection');
                this.genreSection = document.getElementById('genreSection');
                this.querySection = document.getElementById('querySection');
                this.actionsSection = document.getElementById('actionsSection');
                this.referencesSection = document.getElementById('referencesSection');
                this.dimensionalSection = document.getElementById('dimensionalSection');

                // –ö–æ–Ω—Ç–µ–Ω—Ç
                this.genreContent = document.getElementById('genreContent');
                this.queryContent = document.getElementById('queryContent');
                this.actionsContent = document.getElementById('actionsContent');
                this.referencesContent = document.getElementById('referencesContent');
                this.dimensionalContent = document.getElementById('dimensionalContent');
                this.themeInput = document.getElementById('themeInput');
                this.outputContent = document.getElementById('outputContent');

                // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
                this.copyOutputBtn = document.getElementById('copyOutputBtn');
                this.applyGenreBtn = document.getElementById('applyGenreBtn');
                this.clearGenreBtn = document.getElementById('clearGenreBtn');
                this.applyQueryBtn = document.getElementById('applyQueryBtn');
                this.clearQueryBtn = document.getElementById('clearQueryBtn');
                this.applyActionsBtn = document.getElementById('applyActionsBtn');
                this.clearActionsBtn = document.getElementById('clearActionsBtn');
                this.applyReferencesBtn = document.getElementById('applyReferencesBtn');
                this.clearReferencesBtn = document.getElementById('clearReferencesBtn');
                this.applyDimensionalBtn = document.getElementById('applyDimensionalBtn');
                this.clearDimensionalBtn = document.getElementById('clearDimensionalBtn');

                // –≠–ª–µ–º–µ–Ω—Ç—ã —Ä–µ–∂–∏–º–∞ –∏–Ω—Ç–µ—Ä–≤—å—é
                this.interviewModeCheckbox = document.getElementById('interviewModeCheckbox');

                // –≠–ª–µ–º–µ–Ω—Ç—ã –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–º–ø–æ—Ä—Ç–∞
                this.importModal = document.getElementById('importModal');
                this.importOptions = document.getElementById('importOptions');
                this.confirmImportBtn = document.getElementById('confirmImportBtn');
                this.cancelImportBtn = document.getElementById('cancelImportBtn');

                // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ
                this.statusMessage = document.getElementById('statusMessage');
                this.themeToggle = document.getElementById('themeToggle');
                this.themeCheckbox = document.getElementById('themeCheckbox');
                this.fileInput = null;
            }

            attachEventListeners() {
                // –ö–Ω–æ–ø–∫–∏ —Ç—É–ª–±–∞—Ä–∞
                this.setThemeBtn.addEventListener('click', () => this.toggleSection('input'));
                this.genreBtn.addEventListener('click', () => this.toggleSection('genre'));
                this.queryBtn.addEventListener('click', () => this.toggleSection('query'));
                this.actionsBtn.addEventListener('click', () => this.toggleSection('actions'));
                this.referencesBtn.addEventListener('click', () => this.toggleSection('references'));
                this.dimensionalBtn.addEventListener('click', () => this.toggleSection('dimensional'));
                this.collectBtn.addEventListener('click', () => this.collectAndCopyToClipboard());
                this.exportBtn.addEventListener('click', () => this.exportAllData());
                this.importBtn.addEventListener('click', () => this.showImportModal());
                this.clearAllBtn.addEventListener('click', () => this.clearAll());
                this.clearInputBtn.addEventListener('click', () => this.clearInput());
                this.clearOutputBtn.addEventListener('click', () => this.clearOutput());
                this.copyOutputBtn.addEventListener('click', () => this.copyToClipboard());
                this.themeCheckbox.addEventListener('change', () => this.toggleTheme());

                // –ö–Ω–æ–ø–∫–∏ –ø—Ä–µ—Å–µ—Ç–æ–≤
                this.applyGenreBtn.addEventListener('click', () => this.applyPreset('genre'));
                this.clearGenreBtn.addEventListener('click', () => this.clearPreset('genre'));
                this.applyQueryBtn.addEventListener('click', () => this.applyPreset('query'));
                this.clearQueryBtn.addEventListener('click', () => this.clearPreset('query'));
                this.applyActionsBtn.addEventListener('click', () => this.applyPreset('actions'));
                this.clearActionsBtn.addEventListener('click', () => this.clearPreset('actions'));
                this.applyReferencesBtn.addEventListener('click', () => this.applyPreset('references'));
                this.clearReferencesBtn.addEventListener('click', () => this.clearPreset('references'));
                this.applyDimensionalBtn.addEventListener('click', () => this.applyPreset('dimensional'));
                this.clearDimensionalBtn.addEventListener('click', () => this.clearPreset('dimensional'));

                // –°–ª—É—à–∞—Ç–µ–ª—å –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞ —Ä–µ–∂–∏–º–∞ –∏–Ω—Ç–µ—Ä–≤—å—é
                this.interviewModeCheckbox.addEventListener('change', () => this.saveToStorage());

                // –°–ª—É—à–∞—Ç–µ–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–º–ø–æ—Ä—Ç–∞
                this.confirmImportBtn.addEventListener('click', () => this.confirmImport());
                this.cancelImportBtn.addEventListener('click', () => this.hideImportModal());

                // –°–ª—É—à–∞—Ç–µ–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
                this.themeInput.addEventListener('input', () => this.debouncedSave());
                this.genreContent.addEventListener('input', () => this.debouncedSave());
                this.queryContent.addEventListener('input', () => this.debouncedSave());
                this.actionsContent.addEventListener('input', () => this.debouncedSave());
                this.referencesContent.addEventListener('input', () => this.debouncedSave());
                this.dimensionalContent.addEventListener('input', () => this.debouncedSave());
            }

            // ============= –ù–û–í–´–ï –ú–ï–¢–û–î–´ –î–õ–Ø –≠–ö–°–ü–û–†–¢–ê/–ò–ú–ü–û–†–¢–ê =============

            exportAllData() {
                const exportData = {
                    version: "1.0",
                    exportDate: new Date().toISOString(),
                    theme: this.themeInput.value,
                    output: this.outputContent.textContent,
                    boards: {
                        genre: {
                            content: this.genreContent.value,
                            name: "–ñ–∞–Ω—Ä–æ–≤—ã–π –≥–∏–±—Ä–∏–¥"
                        },
                        query: {
                            content: this.queryContent.value,
                            name: "–ö–ª—é—á–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å"
                        },
                        actions: {
                            content: this.actionsContent.value,
                            name: "–î–µ–π—Å—Ç–≤–∏—è-–ò—Å–∫–ª—é—á–µ–Ω–∏—è"
                        },
                        references: {
                            content: this.referencesContent.value,
                            name: "–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã"
                        },
                        dimensional: {
                            content: this.dimensionalContent.value,
                            name: "3D-–ö–∞—Ä–∫–∞—Å"
                        }
                    },
                    interviewMode: this.interviewModeCheckbox.checked,
                    metadata: {
                        description: "–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ù–∞—Ä—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –ê–ª—Ö–∏–º–∏–∫–∞",
                        totalBoards: 5
                    }
                };

                const jsonString = JSON.stringify(exportData, null, 2);
                const blob = new Blob([jsonString], { type: 'application/json;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                
                const date = new Date().toISOString().split('T')[0];
                a.href = url;
                a.download = `–Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã–π-–∞–ª—Ö–∏–º–∏–∫-—ç–∫—Å–ø–æ—Ä—Ç-${date}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showStatus('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ JSON —Ñ–∞–π–ª!');
            }

            showImportModal() {
                // –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω–ø—É—Ç
                if (!this.fileInput) {
                    this.fileInput = document.createElement('input');
                    this.fileInput.type = 'file';
                    this.fileInput.accept = '.json';
                    this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
                }
                this.fileInput.click();
            }

            handleFileSelect(event) {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        this.currentImportData = data;
                        this.showImportSelectionModal(data);
                    } catch (err) {
                        this.showStatus('–û—à–∏–±–∫–∞: —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON', true);
                        console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:', err);
                    }
                };
                reader.readAsText(file);
            }

            showImportSelectionModal(data) {
                // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ–ø—Ü–∏–∏
                this.importOptions.innerHTML = '';

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–∫—Ü–∏–π
                const sections = [
                    { id: 'theme', name: '–û—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞', exists: !!data.theme },
                    { id: 'output', name: '–†–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏', exists: !!data.output },
                    { id: 'genre', name: '–ñ–∞–Ω—Ä–æ–≤—ã–π –≥–∏–±—Ä–∏–¥', exists: data.boards && !!data.boards.genre?.content },
                    { id: 'query', name: '–ö–ª—é—á–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å', exists: data.boards && !!data.boards.query?.content },
                    { id: 'actions', name: '–î–µ–π—Å—Ç–≤–∏—è-–ò—Å–∫–ª—é—á–µ–Ω–∏—è', exists: data.boards && !!data.boards.actions?.content },
                    { id: 'references', name: '–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã', exists: data.boards && !!data.boards.references?.content },
                    { id: 'dimensional', name: '3D-–ö–∞—Ä–∫–∞—Å', exists: data.boards && !!data.boards.dimensional?.content }
                ];

                // –°–æ–∑–¥–∞–µ–º —á–µ–∫–±–æ–∫—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ–π —Å–µ–∫—Ü–∏–∏
                sections.forEach(section => {
                    if (section.exists) {
                        const optionDiv = document.createElement('div');
                        optionDiv.className = 'import-option';
                        
                        const checkbox = document.createElement('input');
                        checkbox.type = 'checkbox';
                        checkbox.id = `import-${section.id}`;
                        checkbox.checked = true; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –≤—ã–±—Ä–∞–Ω—ã
                        
                        const label = document.createElement('label');
                        label.htmlFor = `import-${section.id}`;
                        label.textContent = section.name;
                        
                        optionDiv.appendChild(checkbox);
                        optionDiv.appendChild(label);
                        this.importOptions.appendChild(optionDiv);
                    }
                });

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                this.importModal.classList.add('active');
            }

            hideImportModal() {
                this.importModal.classList.remove('active');
                this.currentImportData = null;
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω–ø—É—Ç
                if (this.fileInput) {
                    this.fileInput.value = '';
                }
            }

            confirmImport() {
                const data = this.currentImportData;
                if (!data) return;

                // –°–æ–±–∏—Ä–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏
                const sectionsToImport = {
                    theme: document.getElementById('import-theme')?.checked || false,
                    output: document.getElementById('import-output')?.checked || false,
                    genre: document.getElementById('import-genre')?.checked || false,
                    query: document.getElementById('import-query')?.checked || false,
                    actions: document.getElementById('import-actions')?.checked || false,
                    references: document.getElementById('import-references')?.checked || false,
                    dimensional: document.getElementById('import-dimensional')?.checked || false
                };

                let importedCount = 0;

                // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏
                if (sectionsToImport.theme && data.theme) {
                    this.themeInput.value = data.theme;
                    importedCount++;
                }

                if (sectionsToImport.output && data.output && 
                    data.output !== '// –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∞–ª—Ö–∏–º–∏–∫–∞...') {
                    this.outputContent.textContent = data.output;
                    importedCount++;
                }

                // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–æ—Å–æ–∫
                if (data.boards) {
                    if (sectionsToImport.genre && data.boards.genre?.content) {
                        this.genreContent.value = data.boards.genre.content;
                        importedCount++;
                    }
                    
                    if (sectionsToImport.query && data.boards.query?.content) {
                        this.queryContent.value = data.boards.query.content;
                        importedCount++;
                    }
                    
                    if (sectionsToImport.actions && data.boards.actions?.content) {
                        this.actionsContent.value = data.boards.actions.content;
                        importedCount++;
                    }
                    
                    if (sectionsToImport.references && data.boards.references?.content) {
                        this.referencesContent.value = data.boards.references.content;
                        importedCount++;
                    }
                    
                    if (sectionsToImport.dimensional && data.boards.dimensional?.content) {
                        this.dimensionalContent.value = data.boards.dimensional.content;
                        importedCount++;
                    }
                }

                // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–µ–∂–∏–º–∞ –∏–Ω—Ç–µ—Ä–≤—å—é, –µ—Å–ª–∏ –µ—Å—Ç—å
                if (data.interviewMode !== undefined) {
                    this.interviewModeCheckbox.checked = data.interviewMode;
                }

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                this.saveToStorage();
                this.hideImportModal();
                this.showStatus(`–£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ ${importedCount} —Å–µ–∫—Ü–∏–π!`);
            }

            // ============= –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –ú–ï–¢–û–î–´ =============

            toggleSection(sectionType) {
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏
                this.inputSection.classList.remove('active');
                this.genreSection.classList.remove('active');
                this.querySection.classList.remove('active');
                this.actionsSection.classList.remove('active');
                this.referencesSection.classList.remove('active');
                this.dimensionalSection.classList.remove('active');

                // –û—Ç–∫—Ä—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å–µ–∫—Ü–∏—é
                switch(sectionType) {
                    case 'input':
                        this.inputSection.classList.add('active');
                        this.themeInput.focus();
                        break;
                    case 'genre':
                        this.genreSection.classList.add('active');
                        this.genreContent.focus();
                        break;
                    case 'query':
                        this.querySection.classList.add('active');
                        this.queryContent.focus();
                        break;
                    case 'actions':
                        this.actionsSection.classList.add('active');
                        this.actionsContent.focus();
                        break;
                    case 'references':
                        this.referencesSection.classList.add('active');
                        this.referencesContent.focus();
                        break;
                    case 'dimensional':
                        this.dimensionalSection.classList.add('active');
                        this.dimensionalContent.focus();
                        break;
                }
            }

            debouncedSave() {
                if (this.saveTimeout) {
                    clearTimeout(this.saveTimeout);
                }
                this.saveTimeout = setTimeout(() => {
                    this.saveToStorage();
                }, this.DEBOUNCE_DELAY);
            }

            toggleTheme() {
                const isLightTheme = this.themeCheckbox.checked;
                document.documentElement.setAttribute('data-theme', isLightTheme ? 'light' : 'dark');
                this.saveToStorage();
            }

            applyTheme() {
                const savedTheme = localStorage.getItem('narrativeAlchemistTheme');
                const isLightTheme = savedTheme === 'light';
                this.themeCheckbox.checked = isLightTheme;
                document.documentElement.setAttribute('data-theme', isLightTheme ? 'light' : 'dark');
            }

            applyPreset(presetType) {
                let content, presetName;

                switch(presetType) {
                    case 'genre':
                        content = this.genreContent.value;
                        presetName = '–∂–∞–Ω—Ä–æ–≤—ã–π –≥–∏–±—Ä–∏–¥';
                        break;
                    case 'query':
                        content = this.queryContent.value;
                        presetName = '–∫–ª—é—á–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å';
                        break;
                    case 'actions':
                        content = this.actionsContent.value;
                        presetName = '–¥–µ–π—Å—Ç–≤–∏—è-–∏—Å–∫–ª—é—á–µ–Ω–∏—è';
                        break;
                    case 'references':
                        content = this.referencesContent.value;
                        presetName = '—Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã';
                        break;
                    case 'dimensional':
                        content = this.dimensionalContent.value;
                        presetName = '3D-–∫–∞—Ä–∫–∞—Å';
                        break;
                }

                const activePresets = this.extractAllContent(content);

                if (activePresets.length > 0) {
                    let currentText = this.themeInput.value;
                    if (currentText) {
                        currentText += '\n\n';
                    }

                    switch(presetType) {
                        case 'genre':
                            this.themeInput.value = currentText + `–ñ–∞–Ω—Ä–æ–≤—ã–π –≥–∏–±—Ä–∏–¥: ${activePresets.join(' + ')}`;
                            break;
                        case 'query':
                            this.themeInput.value = currentText + `–ö–ª—é—á–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å: ${activePresets.join(' | ')}`;
                            break;
                        case 'actions':
                            this.themeInput.value = currentText + `–î–µ–π—Å—Ç–≤–∏—è-–ò—Å–∫–ª—é—á–µ–Ω–∏—è:\n${activePresets.join('\n')}`;
                            break;
                        case 'references':
                            this.themeInput.value = currentText + `–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã: ${activePresets.join(' | ')}`;
                            break;
                        case 'dimensional':
                            this.themeInput.value = currentText + `3D-–ö–ê–†–ö–ê–°:\n${activePresets.join('\n')}`;
                            break;
                    }

                    this.inputSection.classList.add('active');
                    this.showStatus(`–ü—Ä–∏–º–µ–Ω–µ–Ω ${presetName}: ${activePresets.slice(0, 2).join(', ')}${activePresets.length > 2 ? '...' : ''}`);
                } else {
                    this.showStatus(`–í—ã–±–µ—Ä–∏—Ç–µ ${presetName} (—É–±–µ—Ä–∏—Ç–µ # —Å –Ω—É–∂–Ω—ã—Ö —Å—Ç—Ä–æ–∫) –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏`, true);
                }
            }

            extractAllContent(text) {
                const lines = text.split('\n');
                const allContent = [];
                const templatePhrases = [
                    '# =====', '# ===', '# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ', '# –ù–∞–ø—Ä–∏–º–µ—Ä:',
                    '# –≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏', '# –ü—Ä–∏ —Å–±–æ—Ä–∫–µ', '# –≠—Ç–∏ –ø–∞—Ä–∞–¥–æ–∫—Å—ã',
                    '# –î–≤–∏–∂–æ–∫ —É—á—Ç–µ—Ç', '# –£–∫–∞–∂–∏—Ç–µ –∞–≤—Ç–æ—Ä–æ–≤', '# ====',
                    '# –§–æ—Ä–º–∞—Ç:', '# –ù–∞–ø—Ä–∏–º–µ—Ä:', '# –ù–∞–ø—Ä–∏–º–µ—Ä: "'
                ];
                
                let hasUncommentedLines = false;
                
                for (const line of lines) {
                    const trimmedLine = line.trim();
                    if (!trimmedLine.startsWith('#') && trimmedLine !== '') {
                        hasUncommentedLines = true;
                        allContent.push(line.trim());
                    }
                }
                
                if (!hasUncommentedLines) {
                    for (const line of lines) {
                        const trimmedLine = line.trim();
                        if (trimmedLine !== '' && 
                            !trimmedLine.startsWith('#') && 
                            !templatePhrases.some(phrase => line.includes(phrase))) {
                            allContent.push(line.trim());
                        }
                    }
                }
                
                return allContent;
            }

            clearPreset(presetType) {
                switch(presetType) {
                    case 'genre':
                        this.genreContent.value = '';
                        break;
                    case 'query':
                        this.queryContent.value = '';
                        break;
                    case 'actions':
                        this.actionsContent.value = '';
                        break;
                    case 'references':
                        this.referencesContent.value = '';
                        break;
                    case 'dimensional':
                        this.dimensionalContent.value = '';
                        break;
                }
                this.saveToStorage();
                this.showStatus(`–ü—Ä–µ—Å–µ—Ç ${presetType} –æ—á–∏—â–µ–Ω`);
            }

            async collectAndCopyToClipboard() {
                const userTheme = this.themeInput.value.trim();
                const genreText = this.genreContent.value;
                const queryText = this.queryContent.value;
                const actionsText = this.actionsContent.value;
                const referencesText = this.referencesContent.value;
                const dimensionalText = this.dimensionalContent.value;
                const isInterviewMode = this.interviewModeCheckbox.checked;

                const activeGenres = this.extractAllContent(genreText);
                const activeQueries = this.extractAllContent(queryText);
                const userActions = this.extractAllContent(actionsText);
                const userReferences = this.extractAllContent(referencesText);
                const dimensionalTemplate = this.extractAllContent(dimensionalText).join('\n');

                let result;

                const hasData = userTheme || activeGenres.length > 0 || activeQueries.length > 0 || 
                               userActions.length > 0 || userReferences.length > 0;

                if (!hasData && !dimensionalTemplate.trim()) {
                    result = this.getAlchemistTemplate([], [], [], [], '');
                } else {
                    if (isInterviewMode) {
                        result = this.generateInterviewPrompt(userTheme, activeGenres, activeQueries, userActions, userReferences, dimensionalTemplate);
                    } else {
                        result = "–ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–í–ò–ñ–ö–£: –°–û–ó–î–ê–¢–¨ –£–ù–ò–ö–ê–õ–¨–ù–£–Æ –ò–°–¢–û–†–ò–Æ!\n\n";

                        if (userTheme) {
                            result += `–û–°–ù–û–í–ù–ê–Ø –¢–ï–ú–ê: ${userTheme}\n`;
                        }

                        if (activeGenres.length > 0) {
                            result += `–ñ–ê–ù–†–û–í–ê–Ø –°–ú–ï–°–¨: ${activeGenres.join(' + ')}\n`;
                        }

                        if (activeQueries.length > 0) {
                            result += `–ö–õ–Æ–ß–ï–í–´–ï –ó–ê–ü–†–û–°–´: ${activeQueries.join(' | ')}\n`;
                        }

                        if (userActions.length > 0) {
                            result += `\n–î–ï–ô–°–¢–í–ò–Ø –ò –ò–°–ö–õ–Æ–ß–ï–ù–ò–Ø:\n${userActions.join('\n')}\n`;
                        }

                        if (userReferences.length > 0) {
                            result += `\n–†–ï–§–ï–†–ï–ù–°–´:\n${userReferences.join('\n')}\n`;
                        }

                        result += '\n' + this.getAlchemistTemplate(activeGenres, activeQueries, userActions, userReferences, dimensionalTemplate);

                        if (dimensionalTemplate.trim()) {
                            result += `\n\n=== 3D-–ö–ê–†–ö–ê–° –î–õ–Ø –ò–°–¢–û–†–ò–ò ===\n${dimensionalTemplate}`;
                        }
                    }
                }

                this.outputContent.textContent = result;
                this.saveToStorage();

                try {
                    await navigator.clipboard.writeText(result);
                    this.showStatus('–¢–µ–∫—Å—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                } catch (err) {
                    try {
                        const textArea = document.createElement('textarea');
                        textArea.value = result;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        this.showStatus('–¢–µ–∫—Å—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                    } catch (fallbackErr) {
                        this.showStatus('–¢–µ–∫—Å—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä', true);
                    }
                }
            }

            generateInterviewPrompt(userTheme, activeGenres, activeQueries, userActions, userReferences, dimensionalTemplate) {
                const hasDimensionalTemplate = dimensionalTemplate.trim().length > 0;
                
                let prompt = `–¢—ã ‚Äî –æ–ø—ã—Ç–Ω—ã–π –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã–π –∞–ª—Ö–∏–º–∏–∫ –∏ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –ø–æ —Å—Ç–æ—Ä–∏—Ç–µ–ª–ª–∏–Ω–≥—É. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é, –∞ –ø—Ä–æ–≤–µ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –µ–º—É –∑–∞–ø–æ–ª–Ω–∏—Ç—å 3D-–∫–∞—Ä–∫–∞—Å –µ–≥–æ –±—É–¥—É—â–µ–≥–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è.

–ò–°–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:
${userTheme ? `–¢–µ–º–∞/–∏–¥–µ—è: ${userTheme}` : '–¢–µ–º–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞'}
${activeGenres.length > 0 ? `–ñ–∞–Ω—Ä—ã: ${activeGenres.join(' + ')}` : '–ñ–∞–Ω—Ä—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã'}
${activeQueries.length > 0 ? `–ö–ª—é—á–µ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã: ${activeQueries.join(' | ')}` : '–ö–ª—é—á–µ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã'}
${userActions.length > 0 ? `–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ —Å—Ç–∏–ª—é:\n${userActions.join('\n')}` : '–°—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω—ã'}
${userReferences.length > 0 ? `–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ:\n${userReferences.join('\n')}` : '–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã'}

${hasDimensionalTemplate ? `
–†–ê–°–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´ 3D-–ö–ê–†–ö–ê–°–ê:
${dimensionalTemplate}

–ò–°–ü–û–õ–¨–ó–£–ô —ç—Ç–∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é. –£—á–∏—Ç—ã–≤–∞–π –∏—Ö –ø—Ä–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–µ –≤–æ–ø—Ä–æ—Å–æ–≤.` : `
3D-–ö–ê–†–ö–ê–° –ù–ï –ó–ê–ü–û–õ–ù–ï–ù - –Ω–∞—á–Ω–∏ –∏–Ω—Ç–µ—Ä–≤—å—é "—Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞".`}

–¢–í–û–Ø –ó–ê–î–ê–ß–ê:
–ü—Ä–æ–≤–µ–¥–∏ –ø–æ—à–∞–≥–æ–≤–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é, –∑–∞–¥–∞–≤–∞—è –ø–æ 1-2 –≤–æ–ø—Ä–æ—Å–∞ –∑–∞ —Ä–∞–∑, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç 3D-–∫–∞—Ä–∫–∞—Å–∞. –ù–∞—á–∏–Ω–∞–π —Å —Å–∞–º—ã—Ö —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –≥–µ—Ä–æ–µ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ –∞–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç—É –∏ –ª–æ–∫–∞—Ü–∏—è–º.

${hasDimensionalTemplate ? `
–ï–°–õ–ò –ï–°–¢–¨ –†–ê–°–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´:
- –ò—Å–ø–æ–ª—å–∑—É–π –∏—Ö –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–Ω—É—é —Ç–æ—á–∫—É
- –£—Ç–æ—á–Ω—è–π –∏ —É–≥–ª—É–±–ª—è–π —É–∂–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∏–¥–µ–∏
- –ü—Ä–µ–¥–ª–∞–≥–∞–π —Ä–∞–∑–≤–∏—Ç—å –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã` : `
–ï–°–õ–ò –ö–ê–†–ö–ê–° –ü–£–°–¢–û–ô:
- –ù–∞—á–Ω–∏ —Å –±–∞–∑–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
- –ü–æ–º–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∏–¥–µ–∏ —Å –Ω—É–ª—è`}

–°–¢–†–£–ö–¢–£–†–ê –ò–ù–¢–ï–†–í–¨–Æ:
1. –ö—Ä–µ–¥–æ –ì–µ—Ä–æ—è (–∏—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–∞–≤–¥–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞)
2. –ê–Ω—Ç–∏-–ö—Ä–µ–¥–æ (–∏—Å–∫—É—à–µ–Ω–∏–µ –∏–ª–∏ –Ω–æ–≤–∞—è –ø—Ä–∞–≤–¥–∞) 
3. –ö–ª—é—á–µ–≤–æ–π –í–æ–ø—Ä–æ—Å (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç)
4. –õ–æ–∫–∞—Ü–∏—è 1 - –ù–∞—á–∞–ª–æ (–º–µ—Å—Ç–æ –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞)
5. –õ–æ–∫–∞—Ü–∏—è 2 - –ö—É–ª—å–º–∏–Ω–∞—Ü–∏—è (–º–µ—Å—Ç–æ —Ä–µ—à–∞—é—â–µ–≥–æ –≤—ã–±–æ—Ä–∞)
6. –ò–º—è/–û–±—Ä–∞–∑ (–∫–ª—é—á–µ–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–∂ –∏–ª–∏ —Å–∏–º–≤–æ–ª)
7. –ì–ª–∞–≤–Ω–∞—è –ü—Ä–∞–≤–¥–∞ –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ç–æ—á–∫–∞ –∑—Ä–µ–Ω–∏—è)
8. –°–ª–∞–±–æ—Å—Ç—å –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞ (—É—è–∑–≤–∏–º–æ—Å—Ç—å)

–§–û–†–ú–ê–¢ –†–ê–ë–û–¢–´:
- –ó–∞–¥–∞–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ, –Ω–∞–≤–æ–¥—è—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
- –£—á–∏—Ç—ã–≤–∞–π —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∂–∞–Ω—Ä—ã, —Ç–µ–º—É –∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã
- –ü–æ–º–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∏–¥–µ–∏
- –î–≤–∏–≥–∞–π—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫–∞—Ä–∫–∞—Å–∞
- ${hasDimensionalTemplate ? '–£—á–∏—Ç—ã–≤–∞–π —É–∂–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã' : '–ù–∞—á–Ω–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä–∫–∞—Å —Å –Ω—É–ª—è'}

–ù–ê–ß–ù–ò –ò–ù–¢–ï–†–í–¨–Æ –° –ü–ï–†–í–û–ì–û –í–û–ü–†–û–°–ê:`;

                return prompt;
            }

            getAlchemistTemplate(activeGenres = [], activeQueries = [], userActions = [], userReferences = [], dimensionalText = '') {
                let template = `–¢—ã ‚Äî –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã–π –∞–ª—Ö–∏–º–∏–∫, –º–∞—Å—Ç–µ—Ä –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π. –ò—Å–ø–æ–ª—å–∑—É–π —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏:

${activeGenres.length > 0 ? `–ñ–ê–ù–†–û–í–ê–Ø –ê–õ–•–ò–ú–ò–Ø: ${activeGenres.join(' + ')}\n` : ''}
${activeQueries.length > 0 ? `–°–ï–†–î–¶–ï –ò–°–¢–û–†–ò–ò: ${activeQueries.join(' | ')}\n` : ''}
${userReferences.length > 0 ? `–¢–í–û–†–ß–ï–°–ö–ò–ï –†–ï–§–ï–†–ï–ù–°–´:\n${userReferences.join('\n')}\n` : ''}

–°–û–ó–î–ê–ô:
1. –£–Ω–∏–∫–∞–ª—å–Ω—É—é –∫–æ–Ω—Ü–µ–ø—Ü–∏—é, –æ–±—ä–µ–¥–∏–Ω—è—é—â—É—é –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
2. –ì–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è —Å –≥–ª—É–±–æ–∫–∏–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–º
3. –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é –ø—Ä–∞–≤–¥—É
4. –ö–ª—é—á–µ–≤—ã–µ –ø–æ–≤–æ—Ä–æ—Ç–Ω—ã–µ —Ç–æ—á–∫–∏ —Å—é–∂–µ—Ç–∞
5. –§–∏–Ω–∞–ª, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–¥–æ–∫—Å

–°–¢–ò–õ–¨ –ò –ü–û–î–•–û–î:
${userActions.length > 0 ? userActions.join('\n') : '–ò—Å–ø–æ–ª—å–∑—É–π –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è, –ø–æ–∫–∞–∑ —á–µ—Ä–µ–∑ –¥–µ–π—Å—Ç–≤–∏–µ, –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π'}

–í–ê–ñ–ù–û: –ù–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–º–±–∏–Ω–∏—Ä—É–π —ç–ª–µ–º–µ–Ω—Ç—ã, –∞ —Å–æ–∑–¥–∞–π –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –Ω–æ–≤–æ–µ —Ü–µ–ª–æ–µ!`;

                return template;
            }

            async copyToClipboard() {
                const content = this.outputContent.textContent;
                if (!content || content === '// –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∞–ª—Ö–∏–º–∏–∫–∞...') {
                    this.showStatus('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è', true);
                    return;
                }

                try {
                    await navigator.clipboard.writeText(content);
                    this.showStatus('–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                } catch (err) {
                    try {
                        const textArea = document.createElement('textarea');
                        textArea.value = content;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        this.showStatus('–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                    } catch (fallbackErr) {
                        this.showStatus('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏', true);
                    }
                }
            }

            clearInput() {
                this.themeInput.value = '';
                this.saveToStorage();
                this.showStatus('–ü–æ–ª–µ –≤–≤–æ–¥–∞ –æ—á–∏—â–µ–Ω–æ');
            }

            clearOutput() {
                this.outputContent.textContent = '// –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∞–ª—Ö–∏–º–∏–∫–∞...';
                this.saveToStorage();
                this.showStatus('–û–±–ª–∞—Å—Ç—å –≤—ã–≤–æ–¥–∞ –æ—á–∏—â–µ–Ω–∞');
            }

            clearAll() {
                this.clearInput();
                this.clearOutput();
                this.clearPreset('genre');
                this.clearPreset('query');
                this.clearPreset('actions');
                this.clearPreset('references');
                this.clearPreset('dimensional');
                this.interviewModeCheckbox.checked = true;
                this.clearClipboard();
                this.showStatus('–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã, –≤–∫–ª—é—á–∞—è –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
            }

            async clearClipboard() {
                try {
                    await navigator.clipboard.writeText('');
                } catch (err) {
                    try {
                        const textArea = document.createElement('textarea');
                        textArea.value = '';
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                    } catch (fallbackErr) {
                        console.error('–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞:', err);
                    }
                }
            }

            saveToStorage() {
                const data = {
                    theme: this.themeInput.value,
                    output: this.outputContent.textContent,
                    genres: this.genreContent.value,
                    queries: this.queryContent.value,
                    actions: this.actionsContent.value,
                    references: this.referencesContent.value,
                    dimensional: this.dimensionalContent.value,
                    interviewMode: this.interviewModeCheckbox.checked,
                    isInputVisible: this.inputSection.classList.contains('active'),
                    isGenreVisible: this.genreSection.classList.contains('active'),
                    isQueryVisible: this.querySection.classList.contains('active'),
                    isActionsVisible: this.actionsSection.classList.contains('active'),
                    isReferencesVisible: this.referencesSection.classList.contains('active'),
                    isDimensionalVisible: this.dimensionalSection.classList.contains('active')
                };
                localStorage.setItem('narrativeAlchemist', JSON.stringify(data));
                localStorage.setItem('narrativeAlchemistTheme', this.themeCheckbox.checked ? 'light' : 'dark');
            }

            loadFromStorage() {
                try {
                    const saved = localStorage.getItem('narrativeAlchemist');
                    if (saved) {
                        const data = JSON.parse(saved);
                        this.themeInput.value = data.theme || '';
                        this.outputContent.textContent = data.output || '// –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∞–ª—Ö–∏–º–∏–∫–∞...';
                        this.genreContent.value = data.genres || this.genreContent.value;
                        this.queryContent.value = data.queries || this.queryContent.value;
                        this.actionsContent.value = data.actions || this.actionsContent.value;
                        this.referencesContent.value = data.references || this.referencesContent.value;
                        this.dimensionalContent.value = data.dimensional || this.dimensionalContent.value;
                        this.interviewModeCheckbox.checked = data.interviewMode !== undefined ? data.interviewMode : true;

                        if (data.isInputVisible) this.inputSection.classList.add('active');
                        if (data.isGenreVisible) this.genreSection.classList.add('active');
                        if (data.isQueryVisible) this.querySection.classList.add('active');
                        if (data.isActionsVisible) this.actionsSection.classList.add('active');
                        if (data.isReferencesVisible) this.referencesSection.classList.add('active');
                        if (data.isDimensionalVisible) this.dimensionalSection.classList.add('active');
                    }
                } catch (err) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:', err);
                }
            }

            showStatus(message, isError = false) {
                this.statusMessage.textContent = message;
                this.statusMessage.className = 'status-message';
                if (isError) this.statusMessage.classList.add('error');
                this.statusMessage.classList.add('show');

                setTimeout(() => {
                    this.statusMessage.classList.remove('show');
                }, 3000);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new NarrativeAlchemist();
        });
    </script>
</body>
</html>